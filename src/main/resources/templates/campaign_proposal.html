<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·ªÅ xu·∫•t Chi·∫øn d·ªãch Marketing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            justify-content: space-between;
            list-style: none;
            padding: 30px 50px;
            background: #f8f9fa;
        }

        .progress-bar li {
            flex: 1;
            text-align: center;
            position: relative;
            color: #999;
            font-size: 14px;
        }

        .progress-bar li::before {
            content: attr(data-step);
            display: block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            margin: 0 auto 10px;
            font-weight: bold;
        }

        .progress-bar li.active {
            color: #667eea;
        }

        .progress-bar li.active::before {
            background: #667eea;
            color: white;
        }

        .progress-bar li::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            background: #e0e0e0;
            top: 20px;
            left: 50%;
            z-index: -1;
        }

        .progress-bar li:last-child::after {
            display: none;
        }

        /* Wizard Content */
        .wizard-content {
            padding: 40px 50px;
        }

        .wizard-step {
            display: none;
        }

        .wizard-step.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        /* Radio Group Styles */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .radio-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .radio-option input[type="radio"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .radio-option label {
            flex: 1;
            cursor: pointer;
            margin-bottom: 0;
            font-weight: 500;
        }

        .radio-option input[type="radio"]:checked + label {
            color: #667eea;
            font-weight: 600;
        }

        .radio-option:has(input[type="radio"]:checked) {
            border-color: #667eea;
            background: #f0f3ff;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .action-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .action-card.selected {
            border-color: #667eea;
            background: #f0f3ff;
        }

        .action-card input[type="checkbox"] {
            margin-right: 10px;
        }

        .action-card-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .action-card-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 13px;
            color: #666;
        }

        .action-card-details input {
            width: 100%;
            padding: 5px 8px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 13px;
        }

        /* Buttons */
        .wizard-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid #e0e0e0;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        /* Results */
        .result-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .result-card h3 {
            font-size: 32px;
            margin-bottom: 5px;
        }

        .result-card p {
            opacity: 0.9;
            font-size: 14px;
        }

        .distribution-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .distribution-table th,
        .distribution-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .distribution-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .distribution-table tr:hover {
            background: #f8f9fa;
        }

        /* Loading Spinner */
        .loading-spinner {
            text-align: center;
            padding: 50px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ ƒê·ªÅ xu·∫•t Chi·∫øn d·ªãch Marketing</h1>
            <p>T·ªëi ∆∞u h√≥a ng√¢n s√°ch v√† tƒÉng t·ª∑ l·ªá gi·ªØ ch√¢n kh√°ch h√†ng</p>
        </div>

        <!-- Progress Bar -->
        <ul class="progress-bar">
            <li id="progress-step-1" class="active" data-step="1">Th√¥ng tin c∆° b·∫£n</li>
            <li id="progress-step-2" data-step="2">Ch·ªçn h√†nh ƒë·ªông</li>
            <li id="progress-step-3" data-step="3">K·∫øt qu·∫£</li>
        </ul>

        <!-- Wizard Content -->
        <div class="wizard-content">
            <!-- Step 1: Basic Information -->
            <div id="step-1" class="wizard-step active">
                <h2 style="margin-bottom: 20px; color: #333;">B∆∞·ªõc 1: Th√¥ng tin c∆° b·∫£n</h2>
                
                <div class="form-group">
                    <label for="campaign-name">T√™n chi·∫øn d·ªãch *</label>
                    <input type="text" id="campaign-name" placeholder="V√≠ d·ª•: Chi·∫øn d·ªãch Th√°ng 11" required>
                </div>

                <div class="form-group">
                    <label for="customer-source">Ph√¢n kh√∫c kh√°ch h√†ng *</label>
                    <select id="customer-source" required>
                        <option value="">-- ƒêang t·∫£i ph√¢n kh√∫c... --</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="total-budget">Ng√¢n s√°ch t·ªïng ($) *</label>
                    <input type="number" id="total-budget" placeholder="V√≠ d·ª•: 10000" min="0" step="100" required>
                </div>

                <div class="form-group">
                    <label>M·ª•c ti√™u t·ªëi ∆∞u h√≥a *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="goal-roi" name="optimization-goal" value="ROI" checked>
                            <label for="goal-roi">üí∞ ROI - T·ªëi ∆∞u h√≥a l·ª£i nhu·∫≠n ƒë·∫ßu t∆∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="goal-cpc" name="optimization-goal" value="CPC">
                            <label for="goal-cpc">üíµ CPC - T·ªëi ∆∞u h√≥a chi ph√≠ m·ªói kh√°ch h√†ng</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="goal-conversion" name="optimization-goal" value="CONVERSION">
                            <label for="goal-conversion">üìà CONVERSION - T·ªëi ∆∞u h√≥a t·ª∑ l·ªá chuy·ªÉn ƒë·ªïi</label>
                        </div>
                    </div>
                </div>

                <div class="wizard-buttons">
                    <div></div>
                    <button class="btn btn-primary" onclick="goToStep(2)">Ti·∫øp theo ‚Üí</button>
                </div>
            </div>

            <!-- Step 2: Select Actions -->
            <div id="step-2" class="wizard-step">
                <h2 style="margin-bottom: 20px; color: #333;">B∆∞·ªõc 2: Ch·ªçn h√†nh ƒë·ªông Marketing</h2>
                
                <div class="actions-grid" id="actions-grid">
                    <div class="action-card" onclick="toggleAction(this)">
                        <input type="checkbox" id="action-voucher-10" data-action-id="voucher_10">
                        <div class="action-card-title">üé´ Voucher gi·∫£m 10%</div>
                        <div class="action-card-details">
                            <div>
                                <label>Chi ph√≠/ng∆∞·ªùi ($):</label>
                                <input type="number" value="3" step="0.5" min="0" data-field="cost">
                            </div>
                            <div>
                                <label>T·ª∑ l·ªá th√†nh c√¥ng:</label>
                                <input type="number" value="0.20" step="0.01" min="0" max="1" data-field="success">
                            </div>
                        </div>
                    </div>

                    <div class="action-card" onclick="toggleAction(this)">
                        <input type="checkbox" id="action-voucher-20" data-action-id="voucher_20">
                        <div class="action-card-title">üéÅ Voucher gi·∫£m 20%</div>
                        <div class="action-card-details">
                            <div>
                                <label>Chi ph√≠/ng∆∞·ªùi ($):</label>
                                <input type="number" value="5" step="0.5" min="0" data-field="cost">
                            </div>
                            <div>
                                <label>T·ª∑ l·ªá th√†nh c√¥ng:</label>
                                <input type="number" value="0.25" step="0.01" min="0" max="1" data-field="success">
                            </div>
                        </div>
                    </div>

                    <div class="action-card" onclick="toggleAction(this)">
                        <input type="checkbox" id="action-email" data-action-id="email">
                        <div class="action-card-title">üìß Email c√° nh√¢n h√≥a</div>
                        <div class="action-card-details">
                            <div>
                                <label>Chi ph√≠/ng∆∞·ªùi ($):</label>
                                <input type="number" value="1" step="0.5" min="0" data-field="cost">
                            </div>
                            <div>
                                <label>T·ª∑ l·ªá th√†nh c√¥ng:</label>
                                <input type="number" value="0.15" step="0.01" min="0" max="1" data-field="success">
                            </div>
                        </div>
                    </div>

                    <div class="action-card" onclick="toggleAction(this)">
                        <input type="checkbox" id="action-call" data-action-id="personal_call">
                        <div class="action-card-title">üìû G·ªçi ƒëi·ªán tr·ª±c ti·∫øp</div>
                        <div class="action-card-details">
                            <div>
                                <label>Chi ph√≠/ng∆∞·ªùi ($):</label>
                                <input type="number" value="15" step="0.5" min="0" data-field="cost">
                            </div>
                            <div>
                                <label>T·ª∑ l·ªá th√†nh c√¥ng:</label>
                                <input type="number" value="0.40" step="0.01" min="0" max="1" data-field="success">
                            </div>
                        </div>
                    </div>

                    <div class="action-card" onclick="toggleAction(this)">
                        <input type="checkbox" id="action-gift" data-action-id="free_gift">
                        <div class="action-card-title">üéâ Qu√† t·∫∑ng mi·ªÖn ph√≠</div>
                        <div class="action-card-details">
                            <div>
                                <label>Chi ph√≠/ng∆∞·ªùi ($):</label>
                                <input type="number" value="8" step="0.5" min="0" data-field="cost">
                            </div>
                            <div>
                                <label>T·ª∑ l·ªá th√†nh c√¥ng:</label>
                                <input type="number" value="0.30" step="0.01" min="0" max="1" data-field="success">
                            </div>
                        </div>
                    </div>

                    <div class="action-card" onclick="toggleAction(this)">
                        <input type="checkbox" id="action-sms" data-action-id="sms">
                        <div class="action-card-title">üí¨ SMS Marketing</div>
                        <div class="action-card-details">
                            <div>
                                <label>Chi ph√≠/ng∆∞·ªùi ($):</label>
                                <input type="number" value="0.5" step="0.1" min="0" data-field="cost">
                            </div>
                            <div>
                                <label>T·ª∑ l·ªá th√†nh c√¥ng:</label>
                                <input type="number" value="0.10" step="0.01" min="0" max="1" data-field="success">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="wizard-buttons">
                    <button class="btn btn-secondary" onclick="goToStep(1)">‚Üê Quay l·∫°i</button>
                    <button class="btn btn-primary" onclick="runSimulation()">Ch·∫°y m√¥ ph·ªèng ‚Üí</button>
                </div>
            </div>

            <!-- Step 3: Results -->
            <div id="step-3" class="wizard-step">
                <h2 style="margin-bottom: 20px; color: #333;">B∆∞·ªõc 3: K·∫øt qu·∫£ ƒë·ªÅ xu·∫•t</h2>
                
                <!-- Loading Spinner -->
                <div id="loading-spinner" class="loading-spinner">
                    <div class="spinner"></div>
                    <p style="color: #667eea; font-weight: 600;">ƒêang ph√¢n t√≠ch v√† t·ªëi ∆∞u h√≥a...</p>
                </div>

                <!-- Result Content -->
                <div id="result-content" class="hidden">
                    <div class="result-summary">
                        <div class="result-card">
                            <h3 id="result-roi">0%</h3>
                            <p>ROI D·ª± ki·∫øn</p>
                        </div>
                        <div class="result-card">
                            <h3 id="result-cost">$0</h3>
                            <p>T·ªïng Chi ph√≠</p>
                        </div>
                        <div class="result-card">
                            <h3 id="result-retention">0</h3>
                            <p>Kh√°ch h√†ng gi·ªØ ch√¢n</p>
                        </div>
                        <div class="result-card">
                            <h3 id="result-revenue">$0</h3>
                            <p>Doanh thu ti·∫øt ki·ªám</p>
                        </div>
                    </div>

                    <h3 style="margin: 30px 0 15px; color: #333;">Ph√¢n b·ªï h√†nh ƒë·ªông t·ªëi ∆∞u:</h3>
                    <table class="distribution-table">
                        <thead>
                            <tr>
                                <th>H√†nh ƒë·ªông</th>
                                <th>S·ªë l∆∞·ª£ng kh√°ch h√†ng</th>
                                <th>Chi ph√≠ ($)</th>
                            </tr>
                        </thead>
                        <tbody id="distribution-body">
                            <!-- JavaScript will populate this -->
                        </tbody>
                    </table>

                    <div class="wizard-buttons">
                        <button class="btn btn-secondary" onclick="goToStep(1)">‚Üê T·∫°o chi·∫øn d·ªãch m·ªõi</button>
                        <button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è In b√°o c√°o</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // H√†m chuy·ªÉn tab
        function goToStep(stepNumber) {
            document.querySelectorAll('.wizard-step').forEach(step => step.classList.remove('active'));
            document.getElementById('step-' + stepNumber).classList.add('active');
            document.querySelectorAll('.progress-bar li').forEach(li => li.classList.remove('active'));
            for(let i = 1; i <= stepNumber; i++) {
                document.getElementById('progress-step-' + i).classList.add('active');
            }
        }

        // Toggle action card selection
        function toggleAction(card) {
            const checkbox = card.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            if (checkbox.checked) {
                card.classList.add('selected');
            } else {
                card.classList.remove('selected');
            }
        }

        // Thu th·∫≠p d·ªØ li·ªáu t·ª´ actions
        function collectActionsData() {
            const actions = [];
            const actionCards = document.querySelectorAll('.action-card');
            
            actionCards.forEach(card => {
                const checkbox = card.querySelector('input[type="checkbox"]');
                if (checkbox.checked) {
                    const actionId = checkbox.getAttribute('data-action-id');
                    const costInput = card.querySelector('input[data-field="cost"]');
                    const successInput = card.querySelector('input[data-field="success"]');
                    
                    actions.push({
                        action_id: actionId,
                        cost_per_user: parseFloat(costInput.value),
                        success_rate: parseFloat(successInput.value)
                    });
                }
            });
            
            return actions;
        }

        // H√†m ch√≠nh ƒë·ªÉ G·ªåI API JAVA
        async function runSimulation() {
            // Validation
            const campaignName = document.getElementById('campaign-name').value.trim();
            const targetSegment = document.getElementById('customer-source').value;
            const totalBudget = parseFloat(document.getElementById('total-budget').value);
            const optimizationGoal = document.querySelector('input[name="optimization-goal"]:checked')?.value;
            const actions = collectActionsData();

            if (!campaignName) {
                alert('Vui l√≤ng nh·∫≠p t√™n chi·∫øn d·ªãch!');
                goToStep(1);
                return;
            }

            if (!targetSegment) {
                alert('Vui l√≤ng ch·ªçn ph√¢n kh√∫c kh√°ch h√†ng!');
                goToStep(1);
                return;
            }

            if (!totalBudget || totalBudget <= 0) {
                alert('Vui l√≤ng nh·∫≠p ng√¢n s√°ch h·ª£p l·ªá!');
                goToStep(1);
                return;
            }

            if (!optimizationGoal) {
                alert('Vui l√≤ng ch·ªçn m·ª•c ti√™u t·ªëi ∆∞u h√≥a!');
                goToStep(1);
                return;
            }

            if (actions.length === 0) {
                alert('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt h√†nh ƒë·ªông Marketing!');
                goToStep(2);
                return;
            }

            // 1. Chuy·ªÉn sang tab 3 v√† hi·ªán loading
            goToStep(3);
            const loadingSpinner = document.getElementById('loading-spinner');
            const resultContent = document.getElementById('result-content');
            resultContent.classList.add('hidden');
            loadingSpinner.style.display = 'block';

            // 2. Chu·∫©n b·ªã request data
            const requestData = {
                campaignName: campaignName,
                targetSegment: targetSegment,
                totalBudget: totalBudget,
                optimizationGoal: optimizationGoal,
                availableActions: actions
            };

            console.log('Sending request:', requestData);

            // 3. G·ªçi API (POST /campaign/api/propose)
            try {
                const response = await fetch('/campaign/api/propose', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                if (!response.ok) {
                    throw new Error('L·ªói t·ª´ server: ' + response.statusText);
                }

                const resultPlan = await response.json();
                console.log('Received result:', resultPlan);
                console.log('Expected Retention from API:', resultPlan.expected_retention);
                console.log('Distribution:', resultPlan.distribution);

                // T√≠nh t·ªïng t·ª´ distribution ƒë·ªÉ verify
                let totalFromDistribution = 0;
                if (resultPlan.distribution && resultPlan.distribution.length > 0) {
                    totalFromDistribution = resultPlan.distribution.reduce((sum, item) => sum + item.assigned_count, 0);
                    console.log('Total from Distribution:', totalFromDistribution);
                }

                // 4. ·∫®n loading v√† ƒê·ªï d·ªØ li·ªáu v√†o HTML
                loadingSpinner.style.display = 'none';

                // C·∫≠p nh·∫≠t c√°c th·∫ª k·∫øt qu·∫£ - S·ª¨ D·ª§NG ƒê√öNG GI√Å TR·ªä T·ª™ B·∫¢NG PH√ÇN B·ªî
                document.getElementById('result-roi').innerText = (resultPlan.predicted_roi * 100).toFixed(1) + '%';
                document.getElementById('result-cost').innerText = '$' + resultPlan.total_cost.toFixed(2);
                // ‚úÖ LU√îN TIN V√ÄO T·ªîNG C·ª¶A B·∫¢NG (totalFromDistribution) - ƒê·∫¢M B·∫¢O NH·∫§T QU√ÅN 100%
                document.getElementById('result-retention').innerText = totalFromDistribution;
                document.getElementById('result-revenue').innerText = '$' + resultPlan.revenue_saved.toFixed(2);

                // C·∫≠p nh·∫≠t b·∫£ng ph√¢n b·ªï
                const distributionBody = document.getElementById('distribution-body');
                distributionBody.innerHTML = '';
                
                if (resultPlan.distribution && resultPlan.distribution.length > 0) {
                    resultPlan.distribution.forEach(item => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${item.action_name || item.action_id}</td>
                            <td>${item.assigned_count}</td>
                            <td>$${item.action_cost.toFixed(2)}</td>
                        `;
                        distributionBody.appendChild(row);
                    });
                } else {
                    distributionBody.innerHTML = '<tr><td colspan="3" style="text-align: center; color: #999;">Kh√¥ng c√≥ d·ªØ li·ªáu ph√¢n b·ªï</td></tr>';
                }

                resultContent.classList.remove('hidden');

            } catch (error) {
                loadingSpinner.style.display = 'none';
                alert('Ch·∫°y m√¥ ph·ªèng th·∫•t b·∫°i: ' + error.message);
                console.error('Error:', error);
                goToStep(2);
            }
        }

        // Load segments t·ª´ API khi trang ƒë∆∞·ª£c t·∫£i
        async function loadSegments() {
            const segmentSelect = document.getElementById('customer-source');
            
            try {
                console.log('üîÑ ƒêang t·∫£i danh s√°ch ph√¢n kh√∫c t·ª´ database...');
                
                const response = await fetch('/campaign/api/segments');
                
                if (!response.ok) {
                    throw new Error('Kh√¥ng th·ªÉ t·∫£i danh s√°ch ph√¢n kh√∫c');
                }
                
                const segments = await response.json();
                console.log('‚úÖ ƒê√£ t·∫£i ƒë∆∞·ª£c', segments.length, 'ph√¢n kh√∫c:', segments);
                
                // X√≥a option "ƒêang t·∫£i..."
                segmentSelect.innerHTML = '<option value="">-- Ch·ªçn ph√¢n kh√∫c --</option>';
                
                // Th√™m c√°c segments t·ª´ API
                segments.forEach(segment => {
                    const option = document.createElement('option');
                    option.value = segment;
                    option.textContent = segment;
                    segmentSelect.appendChild(option);
                });
                
            } catch (error) {
                console.error('‚ùå L·ªói khi t·∫£i segments:', error);
                
                // Fallback: Hi·ªÉn th·ªã danh s√°ch m·∫∑c ƒë·ªãnh n·∫øu API l·ªói
                segmentSelect.innerHTML = `
                    <option value="">-- Ch·ªçn ph√¢n kh√∫c --</option>
                    <option value="Champions">Champions</option>
                    <option value="Loyal">Loyal</option>
                    <option value="Potential Loyalist">Potential Loyalist</option>
                    <option value="At Risk">At Risk</option>
                    <option value="Hibernating">Hibernating</option>
                    <option value="Lost">Lost</option>
                    <option value="New Customers">New Customers</option>
                    <option value="Promising">Promising</option>
                    <option value="About To Sleep">About To Sleep</option>
                `;
            }
        }

        // Prevent input clicks from toggling card selection
        document.addEventListener('DOMContentLoaded', function() {
            // Load segments khi trang v·ª´a load xong
            loadSegments();
            
            const inputs = document.querySelectorAll('.action-card input[type="number"]');
            inputs.forEach(input => {
                input.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            });
        });
    </script>
</body>
</html>
